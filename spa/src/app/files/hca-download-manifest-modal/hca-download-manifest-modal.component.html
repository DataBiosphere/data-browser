<div class="hca-download" [ngClass]="getDownloadClass(1)" *ngIf="state$ | async as state">
    <div>
        <span>Select Manifest File Types</span>
        <span class="fontsize-s">Once you have your manifest, use it to download your data and the associated metadata with the HCA CLI.</span>
    </div>
    <ng-container [ngSwitch]="getFileTypeSummaries(state.fileManifestFileSummary).length > 0">
        <ng-container *ngSwitchCase="true">
            <hca-file-summary
                    [showDownload]="false"
                    [summary]="state.fileManifestFileSummary"></hca-file-summary>
            <ng-container *ngIf="getFileTypeSummaries(state.fileManifestFileSummary).length > 0">
                <div class="hca-download-content">
                    <div class="facet-term-list">
                        <facet-file-format-list [selectedSearchTermNames]="state.selectedSearchTermNames"
                                         [fileTypeSummaries]="getFileTypeSummaries(state.fileManifestFileSummary)"
                                         (facetTermSelected)="onFacetTermSelected($event)"></facet-file-format-list>
                    </div>
                </div>
            </ng-container>
            <div class="hca-download-action">
                <button type="button" (click)="onDownloadManifest()">Download File Manifest</button>
            </div>
        </ng-container>
        <div *ngSwitchDefault class="hca-spinner">
            <mat-spinner diameter="28"></mat-spinner>
        </div>
    </ng-container>
</div>
<div class="hca-download instructions" [ngClass]="getDownloadClass(2)">
    <div>
        <span>Your Manifest is Downloading</span>
        <span class="fontsize-s">When your download completes, use the manifest to retrieve the selected data files and associated metadata.</span>
    </div>
    <div class="hca-download-action">
        <a class="hca-button"
           target="_blank"
           href="{{portalURL}}/guides#downloading-a-data-manifest"
           (click)="closeDialog()">Get
            HCA CLI Instructions</a>
    </div>
</div>
