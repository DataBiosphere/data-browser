<div *ngIf="project$ | async as project">
    <hca-section-title class="section-title-centered small">
        <ng-container title>{{project.projectTitle}}</ng-container>
    </hca-section-title>
    <hca-tab class="project-detail secondary" [tabs]="getProjectDetailTabs()" [activeTab]="getActiveTab()"
             (tabSelected)="onTabSelected($event)"></hca-tab>
    <div>
        <div class="wrapper">
            <div class="project-highlights">
                <div>
                    <p class="fontsize-xs bold lhs">
                        <hca-tooltip [tooltipClass]="'hca-tooltip narrow'"
                                     [tooltipContent]="'An official title for the project.'"
                                     [tooltipDisabled]="false"
                                     [tooltipPosition]="'above'">Project
                        </hca-tooltip>
                    </p>
                    <div class="rhs">
                        <p class="fontsize-xs">{{project.projectTitle}}</p>
                        <p *ngIf="!isProjectSelected(project.projectShortname, selectedFileFacets$ | async)"
                           class="fontsize-xs select-project"
                           (click)="onProjectSelected(project.projectShortname,true)">Select Project</p>
                        <p *ngIf="isProjectSelected(project.projectShortname, selectedFileFacets$ | async)"
                           class="fontsize-xs select-project"
                           (click)="onProjectSelected(project.projectShortname,false)">Unselect Project</p>
                    </div>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">
                        <hca-tooltip [tooltipClass]="'hca-tooltip narrow'"
                                     [tooltipContent]="'A short name for the project.'"
                                     [tooltipDisabled]="false"
                                     [tooltipPosition]="'above'">Short Name
                        </hca-tooltip>
                    </p>
                    <p class="fontsize-xs rhs">{{project.projectShortname}}</p>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">
                        <hca-tooltip [tooltipClass]="'hca-tooltip narrow'"
                                     [tooltipContent]="'The scientific binomial name for the species of the biomaterial.'"
                                     [tooltipDisabled]="false"
                                     [tooltipPosition]="'above'">Species
                        </hca-tooltip>
                    </p>
                    <p class="fontsize-xs rhs">{{stringifyValues(project.species, "-")}}</p>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">
                        <hca-tooltip [tooltipClass]="'hca-tooltip narrow'"
                                     [tooltipContent]="'The organ that the biomaterial came from. Blood and connective tissue are considered organs.'"
                                     [tooltipDisabled]="false"
                                     [tooltipPosition]="'above'">Organ
                        </hca-tooltip>
                    </p>
                    <p class="fontsize-xs rhs">{{stringifyValues(project.organ, "-")}}</p>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">
                        <hca-tooltip [tooltipClass]="'hca-tooltip narrow'"
                                     [tooltipContent]="'A term for a specific part of the organ that the biomaterial came from.'"
                                     [tooltipDisabled]="false"
                                     [tooltipPosition]="'above'"
                        >Organ Part
                        </hca-tooltip>
                    </p>
                    <p class="fontsize-xs rhs">{{stringifyValues(project.organPart, "-")}}</p>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">
                        <hca-tooltip [tooltipClass]="'hca-tooltip narrow'"
                                     [tooltipContent]="'Free text describing any disease association to the cell type. Should be an EFO ontology.'"
                                     [tooltipDisabled]="false"
                                     [tooltipPosition]="'above'"
                        >Diseased
                        </hca-tooltip>
                    </p>
                    <p class="fontsize-xs rhs">{{stringifyValues(project.disease, "-")}}</p>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">
                        <hca-tooltip [tooltipClass]="'hca-tooltip narrow'"
                                     [tooltipContent]="'The general method for sequencing library construction.'"
                                     [tooltipDisabled]="false"
                                     [tooltipPosition]="'above'">Library Construction Method
                        </hca-tooltip>
                    </p>
                    <p class="fontsize-xs rhs"
                       [innerHTML]="stringifyValues(project.libraryConstructionApproach, '-')"></p>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">
                        <hca-tooltip [tooltipClass]="'hca-tooltip narrow'"
                                     [tooltipContent]="'The format of the data file.'"
                                     [tooltipDisabled]="false"
                                     [tooltipPosition]="'above'">File Type
                        </hca-tooltip>
                    </p>
                    <p class="fontsize-xs rhs">{{stringifyValues(project.fileType, "-")}}</p>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">
                        <hca-tooltip [tooltipClass]="'hca-tooltip narrow'"
                                     [tooltipContent]="'Total estimated number of cells in biomaterial. May be 1 for well-based assays.'"
                                     [tooltipDisabled]="false"
                                     [tooltipPosition]="'above'">Estimated Cell Count
                        </hca-tooltip>
                    </p>
                    <p class="fontsize-xs rhs">{{project.cellCount | countSize}}</p>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">
                        <hca-tooltip [tooltipClass]="'hca-tooltip narrow'"
                                     [tooltipContent]="'Donor Count.'"
                                     [tooltipDisabled]="false"
                                     [tooltipPosition]="'above'">Donor Count
                        </hca-tooltip>
                    </p>
                    <p class="fontsize-xs rhs">{{project.donorCount | countSize}}</p>
                </div>
            </div>
            <div class="project-info">
                <div>
                    <h4 class="fontsize-m">Description</h4>
                    <p class="fontsize-s">{{project.projectDescription}}</p>
                </div>
                <div class="lhs">
                    <h4 class="fontsize-m">Contact</h4>
                    <ng-container [ngSwitch]="listContributors(project.contributors).length > 0">
                        <ng-container *ngSwitchCase="true">
                            <div *ngFor="let contributor of listContributors(project.contributors)" class="details">
                                <p class="fontsize-xxs">{{formatContributor(contributor.contactName)}}</p>
                                <p class="fontsize-xxs">{{contributor.institution}}</p>
                                <p class="fontsize-xxs">{{contributor.email}}</p>
                            </div>
                        </ng-container>
                        <p class="fontsize-xxs" *ngSwitchDefault>None</p>
                    </ng-container>
                    <h4 class="fontsize-m">Publications</h4>
                    <ng-container [ngSwitch]="project.publications.length > 0">
                        <ng-container *ngSwitchCase="true">
                            <div *ngFor="let publication of project.publications" class="details">
                                <p class="fontsize-xxs">{{publication.publicationTitle}}</p>
                                <p class="fontsize-xxs"><a href="{{publication.publicationUrl}}" target="_blank"
                                                           class="link">View
                                    here</a></p>
                            </div>
                        </ng-container>
                        <p *ngSwitchDefault class="fontsize-xxs">None</p>
                    </ng-container>
                </div>
                <div class="rhs">
                    <h4 class="fontsize-m">Contributors</h4>
                    <p class="fontsize-xxs">{{listAuthors(project.contributors)}}</p>
                    <h4 class="fontsize-m">Collaborating Organizations</h4>
                    <p class="fontsize-xxs">{{listCollaboratingOrganizations(project.contributors)}}</p>
                </div>
            </div>
            <div class="project-accessions">
                <div>
                    <h4 class="fontsize-m">Accessions</h4>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">Array Express Accessions</p>
                    <div class="rhs">
                        <p class="fontsize-xs">{{stringifyValues(project.arrayExpressAccessions, "None")}}</p>
                    </div>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">GEO Series Accessions</p>
                    <div class="rhs">
                        <p class="fontsize-xs">{{stringifyValues(project.geoSeriesAccessions, "None")}}</p>
                    </div>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">INSDC Project Accessions</p>
                    <div class="rhs">
                        <p class="fontsize-xs">{{stringifyValues(project.insdcProjectAccessions, "None")}}</p>
                    </div>
                </div>
                <div>
                    <p class="fontsize-xs bold lhs">INSDC Study Accessions</p>
                    <div class="rhs">
                        <p class="fontsize-xs">{{stringifyValues(project.insdcStudyAccessions, "None")}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
