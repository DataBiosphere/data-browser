<div class="wrapper">
    <div class="hca-table projects">
        <mat-table *ngIf="pagination$ | async; let pagination" #table [dataSource]="tableElementDataSource" matSort
                   matSortDirection="asc" matSortActive="projectTitle"
                   (matSortChange)="sortTable(pagination, $event)">
            <ng-container matColumnDef="projectTitle">
                <mat-header-cell *matHeaderCellDef class="project">
                    <hca-table-column-header [columnName]="'projectTitle'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipDescription]="'The project name of the data file.'"
                                             [columnSort]="true">Project Name
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element" class="project">
                    <hca-table-cell-with-selector [contentEllipsis]="false" class="selectable">
                        <div [ngClass]="{'chart-legend-bar': true, 'selected': isTermSelected('project', element.projectShortname)}"
                             (click)="onTermSelected('project', element.projectShortname)">
                            <mat-icon *ngIf="isTermSelected('project', element.projectShortname)">check</mat-icon>
                        </div>
                        <div [routerLink]="['/projects', element.entryId]" class="fontsize-xxs semi-bold">
                            {{element.projectTitle}}
                        </div>
                    </hca-table-cell-with-selector>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="organ">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'organ'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipDescription]="'The organ that the biomaterial came from. Blood and connective tissue are considered organs.'"
                                             [columnSort]="true">Organ
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [cellContent]="element.organ">{{element.organ}}</hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="libraryConstructionApproach">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'libraryConstructionApproach'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipDescription]="'The general method for sequencing library construction.'"
                                             [columnSort]="true">Library Construction Method
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [cellContent]="element.libraryConstructionApproach">
                        {{element.libraryConstructionApproach}}
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="genusSpecies">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'genusSpecies'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipDescription]="'The scientific binomial name for the species of the biomaterial.'">
                        Species
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [cellContent]="element.genusSpecies">{{element.genusSpecies}}
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="disease">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'disease'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipDescription]="'Free text describing any disease association to the cell type. Should be an EFO ontology.'">
                        Known Diseases
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [cellContent]="element.disease">{{element.disease}}
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="fileType">
                <mat-header-cell class="file-type" *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'fileFormats'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipDescription]="'The format of the data file.'"
                                             [columnSort]="false">Data
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell class="file-type" *matCellDef="let element">
                    <hca-table-cell [contentEllipsis]="false" class="file-count">
                        <span>{{element.rawCount | localeString}}</span>
                        <span>{{element.processedCount | localeString}}</span>
                        <span>{{element.matrixCount | localeString}}</span>
                        <span>{{element.otherFileCount | localeString}}</span>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="donorCount">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'donorCount'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipDescription]="'Donor count.'"
                                             [columnSort]="false">Donor Count
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [cellContent]="element.donorCount">{{element.donorCount | localeString}}
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="estimatedCellCount">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'estimatedCellCount'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipDescription]="'Total estimated number of cells in biomaterial. May be 1 for well-based assays.'"
                                             [columnSort]="false">
                        Estimated Cell Count
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [cellContent]="element.estimatedCellCount">{{element.estimatedCellCount |
                        localeString}}
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns" [ngClass]="getHeaderClass()"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns; let i = index"
                     [ngClass]="getRowClass(i)"></mat-row>
        </mat-table>
        <hca-table-data-status-placeholder [loading]="loading$ | async"
                                           [isData]="data$ | async"></hca-table-data-status-placeholder>
        <hca-table-pagination [isData]="data$ | async"></hca-table-pagination>
    </div>
</div>


