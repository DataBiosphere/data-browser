<div class="wrapper">
    <div class="hca-table">
        <mat-table *ngIf="pagination$ | async; let pagination" #table [dataSource]="tableElementDataSource" matSort
                   matSortDirection="asc" matSortActive="specimenId"
                   (matSortChange)="sortTable(pagination, $event)">
            <ng-container matColumnDef="specimenId">
                <mat-header-cell *matHeaderCellDef class="specimen">
                    <hca-table-column-header [columnName]="'specimenId'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'A unique ID for this specimen.'"
                                             [columnSort]="true">
                        <hca-table-column-header-title>Specimen Id</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element" class="specimen">
                    <hca-table-cell [tooltipContent]="element.specimenId">
                        <span class="fontsize-xxs">{{element.specimenId}}</span>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="projectTitle">
                <mat-header-cell *matHeaderCellDef class="project">
                    <hca-table-column-header [columnName]="'projectTitle'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'The project name of the data file.'"
                                             [columnSort]="true">
                        <hca-table-column-header-title>Project Name</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell class="project" *matCellDef="let element">
                    <hca-table-cell [tooltipContent]="element.projectTitle">
                        <span class="fontsize-xxs">{{element.projectTitle}}</span>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="fileCount">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'fileCount'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'The count of files for this specimen.'"
                                             [columnSort]="false">
                        <hca-table-column-header-title>File Count</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [tooltipContent]="element.fileCount | localeString" [tooltipDisabled]="isTooltipDisabled(cellContent)">
                        <hca-content-ellipsis>
                        <span class="fontsize-xxs" #cellContent>{{element.fileCount |
                            localeString}}</span>
                        </hca-content-ellipsis>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="organ">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'organ'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'The organ that the biomaterial came from. Blood and connective tissue are considered organs.'"
                                             [columnSort]="true">
                        <hca-table-column-header-title>Organ</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [tooltipContent]="element.organ" [tooltipDisabled]="isTooltipDisabled(cellContent)">
                        <hca-content-ellipsis>
                            <span class="fontsize-xxs" #cellContent>{{element.organ}}</span>
                        </hca-content-ellipsis>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="organPart">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'organPart'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'A term for a specific part of the organ that the biomaterial came from.'"
                                             [columnSort]="true">
                        <hca-table-column-header-title>Organ Part</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [tooltipContent]="element.organPart"
                                    [tooltipDisabled]="isTooltipDisabled(cellContent)">
                        <hca-content-ellipsis>
                            <span class="fontsize-xxs" #cellContent>{{element.organPart}}</span>
                        </hca-content-ellipsis>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="libraryConstructionApproach">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'libraryConstructionApproach'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'The general method for sequencing library construction.'"
                                             [columnSort]="true">
                        <hca-table-column-header-title>Library Construction Method</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [tooltipContent]="element.libraryConstructionApproach"
                                    [tooltipDisabled]="isTooltipDisabled(cellContent)">
                        <hca-content-ellipsis>
                            <span class="fontsize-xxs" #cellContent>{{element.libraryConstructionApproach}}</span>
                        </hca-content-ellipsis>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="genusSpecies">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'genusSpecies'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'The scientific binomial name for the species of the biomaterial.'"
                                             [columnSort]="true">
                        <hca-table-column-header-title>Species</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [tooltipContent]="element.genusSpecies"
                                    [tooltipDisabled]="isTooltipDisabled(cellContent)">
                        <hca-content-ellipsis>
                            <span class="fontsize-xxs" #cellContent>{{element.genusSpecies}}</span>
                        </hca-content-ellipsis>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="organismAge">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'organismAge'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'Age, measured since birth. Age unit is the unit in which age is expressed. Must be one of hour, day, week, month, or year.'"
                                             [columnSort]="true">
                        <hca-table-column-header-title>Age</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [tooltipContent]="element.organismAge"
                                    [tooltipDisabled]="isTooltipDisabled(cellContent)">
                        <hca-content-ellipsis>
                            <span class="fontsize-xxs"
                                  #cellContent>{{getAge(element.organismAge, element.ageUnit)}}</span>
                        </hca-content-ellipsis>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="biologicalSex">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'biologicalSex'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'The biological sex of the organism. Should be one of male, female, mixed, or unknown.'"
                                             [columnSort]="true">
                        <hca-table-column-header-title>Sex</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [tooltipContent]="element.biologicalSex"
                                    [tooltipDisabled]="isTooltipDisabled(cellContent)">
                        <hca-content-ellipsis>
                            <span class="fontsize-xxs" #cellContent>{{element.biologicalSex}}</span>
                        </hca-content-ellipsis>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="disease">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'disease'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'Free text describing any disease association to the cell type. Should be an EFO ontology.'"
                                             [columnSort]="true">
                        <hca-table-column-header-title>Known Diseases</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [tooltipContent]="element.disease"
                                    [tooltipDisabled]="isTooltipDisabled(cellContent)">
                        <hca-content-ellipsis>
                            <span class="fontsize-xxs" #cellContent>{{element.disease}}</span>
                        </hca-content-ellipsis>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="fileType">
                <mat-header-cell class="file-type" *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'fileFormats'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'The format of the data file.'"
                                             [columnSort]="false">
                        <hca-table-column-header-title>Data</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell class="file-type" *matCellDef="let element">
                    <hca-table-cell [tooltipDisabled]="true">
                        <div class="file-count">
                            <span class="fontsize-xxs">{{element.rawCount | localeString}}</span>
                            <span class="fontsize-xxs">{{element.processedCount | localeString}}</span>
                            <span class="fontsize-xxs">{{element.matrixCount | localeString}}</span>
                            <span class="fontsize-xxs">{{element.otherFileCount | localeString}}</span>
                        </div>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="totalCells">
                <mat-header-cell *matHeaderCellDef>
                    <hca-table-column-header [columnName]="'estimatedCellCount'"
                                             [domainCountsByColumnName]="domainCountsByColumnName$ | async"
                                             [domainCountVisibleForColumns]="domainCountVisibleForColumns"
                                             [tooltipContent]="'Total estimated number of cells in biomaterial. May be 1 for well-based assays.'"
                                             [columnSort]="false">
                        <hca-table-column-header-title>Estimated Cell Count</hca-table-column-header-title>
                    </hca-table-column-header>
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <hca-table-cell [tooltipContent]="element.totalCells | localeString"
                                    [tooltipDisabled]="isTooltipDisabled(cellContent)">
                        <hca-content-ellipsis>
                            <span class="fontsize-xxs" #cellContent>{{element.totalCells | localeString}}</span>
                        </hca-content-ellipsis>
                    </hca-table-cell>
                </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns" [ngClass]="getHeaderClass()"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns; let i = index"
                     [ngClass]="getRowClass(i)"></mat-row>
        </mat-table>
        <hca-table-data-status-placeholder [loading]="loading$ | async"
                                           [isData]="data$ | async"></hca-table-data-status-placeholder>
        <hca-table-pagination [isData]="data$ | async"></hca-table-pagination>
    </div>
</div>
